{% extends "notes/base.html" %}
{% block title %}–ú–æ–∏ –∑–∞–º–µ—Ç–∫–∏{% endblock %}
{% block content %}

<div class="max-w-4xl mx-auto">

<!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
<form method="post" class="mb-6 bg-white p-6 rounded-2xl shadow-md border border-gray-200">
  <h2 class="text-2xl font-semibold mb-4 flex items-center gap-2">üìù –î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É</h2>
  {% csrf_token %}
  <div class="space-y-4">
      <div>
          <label for="id_title" class="block text-sm font-medium text-gray-700">–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
          <input type="text" name="title" id="id_title" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–º–µ—Ç–∫–∏..." value="{{ form.title.value|default_if_none:'' }}"
              class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition">
      </div>
      <div>
          <label for="id_content" class="block text-sm font-medium text-gray-700">–¢–µ–∫—Å—Ç –∑–∞–º–µ—Ç–∫–∏</label>
          <textarea name="content" id="id_content" rows="3" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∑–∞–º–µ—Ç–∫–∏..."
              class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition">{{ form.content.value|default_if_none:'' }}</textarea>
      </div>
      <div>
          <label for="id_due_date" class="block text-sm font-medium text-gray-700">–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
          <input type="date" name="due_date" id="id_due_date" value="{{ form.due_date.value|default_if_none:'' }}"
              class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition">
      </div>
  </div>
  <button type="submit" class="mt-4 inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg shadow transition-transform transform hover:scale-105">
      ‚ûï –î–æ–±–∞–≤–∏—Ç—å
  </button>
</form>

    <!-- –ü–æ–∏—Å–∫–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ -->
    <form method="get" action="" class="mb-6 flex items-center gap-2">
        <input type="text" name="q" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –∑–∞–º–µ—Ç–∫–∞–º..." value="{{ query|default:'' }}" class="flex-grow p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400">
        <button type="submit" class="bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg shadow transition-transform transform hover:scale-105">
            –ù–∞–π—Ç–∏
        </button>
    </form>

    <!-- –°–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫ -->
    <h2 class="text-2xl font-bold mb-4 flex items-center gap-2">üìÖ –°–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫</h2>

    {% if notes %}
        <div class="grid gap-4">
            {% for note in notes %}
                <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-200 flex justify-between items-start transition hover:shadow-lg">
                    <div>
                        <h3 class="text-lg font-semibold text-blue-700">{{ note.title }}</h3>
                        <p class="text-gray-700 mt-1">{{ note.content }}</p>
                        {% if note.due_date %}
                        <p class="text-xs text-gray-500 mt-2">üóìÔ∏è –î–æ: {{ note.due_date }}</p>
                        {% endif %}
                    </div>
                    <div class="flex flex-col items-end gap-2">
                        {% if note.is_done %}
                            <span class="text-green-600 font-bold text-sm flex items-center gap-1">‚úî –í—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
                        {% else %}
                            <a href="{% url 'note_toggle_done' note.pk %}" class="text-blue-600 hover:text-blue-800 text-sm flex items-center gap-1">
                                ‚úÖ –û—Ç–º–µ—Ç–∏—Ç—å
                            </a>
                        {% endif %}
                        <a href="{% url 'note_edit' note.pk %}" class="text-yellow-600 hover:text-yellow-800 text-sm flex items-center gap-1">
                            ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                        </a>
                        
                        <a href="{% url 'note_delete' note.pk %}" class="text-red-600 hover:text-red-800 text-sm flex items-center gap-1">
                            üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-gray-600 italic">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–º–µ—Ç–æ–∫.</p>
    {% endif %}

</div>

{% endblock %}
  