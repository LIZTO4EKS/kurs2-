{% extends "notes/base.html" %}
{% block title %}–ú–æ–∏ –∑–∞–º–µ—Ç–∫–∏{% endblock %}
{% block content %}

<!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
<form method="post" class="mb-6 bg-white p-4 rounded shadow-md">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded">
        ‚ûï –î–æ–±–∞–≤–∏—Ç—å
    </button>
</form>

<!-- –ü–æ–∏—Å–∫–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ -->
<form method="get" action="" class="mb-6">
    <input type="text" name="q" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –∑–∞–º–µ—Ç–∫–∞–º..." value="{{ query|default:'' }}" class="p-2 rounded border border-gray-300">
    <button type="submit" class="bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded ml-2">
        –ù–∞–π—Ç–∏
    </button>
</form>

<!-- –°–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫ -->
<h2 class="text-xl font-semibold mb-3">üìÖ –°–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫</h2>
<ul>
    {% for note in notes %}
    <li class="bg-white p-4 rounded shadow mb-2 flex justify-between items-center">
        <div>
            <h3 class="text-lg font-bold">{{ note.title }}</h3>
            <p class="text-sm text-gray-600">{{ note.content }}</p>
            {% if note.due_date %}
            <p class="text-xs text-gray-500">–î–æ: {{ note.due_date }}</p>
            {% endif %}
        </div>
        <div class="flex gap-2">
            {% if note.is_done %}
                <span class="text-green-600 font-bold">‚úî –í—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
            {% else %}
                <a href="{% url 'note_toggle_done' note.pk %}" class="text-blue-500 hover:underline">‚úÖ –û—Ç–º–µ—Ç–∏—Ç—å</a>
            {% endif %}
            <a href="{% url 'note_delete' note.pk %}" class="text-red-500 hover:underline">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</a>
        </div>
    </li>
    {% empty %}
    <li class="text-gray-600">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–º–µ—Ç–æ–∫.</li>
    {% endfor %}
</ul>

{% endblock %}
